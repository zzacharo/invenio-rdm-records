{#
  Copyright (C) 2020 CERN.
  Copyright (C) 2020 Northwestern University.

  Invenio RDM Records is free software; you can redistribute it and/or modify
  it under the terms of the MIT License; see LICENSE file for more details.
#}

{% from 'invenio_previewer/macros.html' import file_list, preview_file %}

{% macro preview_file_box(file, pid) %}
  {%- if file -%}
    <div class="ui accordion" id="preview" href="#collapsablePreview">
      <div class="title">
        {{_('Preview')}} - <span class="filename">{{ file.key }}</span><i class="dropdown icon"></i>
      </div>
      <div id="collapsablePreview" class="content">
        {{- preview_file('invenio_records_ui.recid_previewer', pid=pid, filename=file.key) }}
      </div>
    </div>
  {%- endif %}
{%- endmacro %}



{% macro file_list_box(files, pid) %}
  <div class="ui accordion" id="preview" href="#collapsablePreview">
    <div class="title">
      {{ _("Files") }}
      <small class="text-muted">{% if files %} ({{files|sum(attribute='size')|filesizeformat}}){% endif %}</small>
      <i class="dropdown icon"></i>
    </div>
    <div id="collapsableFiles">
      {{ file_list(files, pid) }}
    </div>
  </div>

{%- endmacro %}
